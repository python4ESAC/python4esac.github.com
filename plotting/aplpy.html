

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>APLpy &mdash; Python4Astronomers v1.1 documentation</title>
    <link rel="stylesheet" href="../_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="Python4Astronomers v1.1 documentation" href="../index.html" />
    <link rel="up" title="Plotting and Images" href="plotting.html" />
    <link rel="next" title="Fitting and Modeling 1-D and 2-D Data" href="../fitting/fitting.html" />
    <link rel="prev" title="Publication-quality plots" href="publication.html" />
 
<script type="text/javascript"> 
$(document).ready(function(){

$(".flip0").click(function(){
    $(".panel0").slideToggle("normal");
  });

$(".flip1").click(function(){
    $(".panel1").slideToggle("normal");
  });

$(".flip2").click(function(){
    $(".panel2").slideToggle("normal");
  });

$(".flip3").click(function(){
    $(".panel3").slideToggle("normal");
  });

$(".flip4").click(function(){
    $(".panel4").slideToggle("normal");
  });

$(".flip5").click(function(){
    $(".panel5").slideToggle("normal");
  });

$(".flip6").click(function(){
    $(".panel6").slideToggle("normal");
  });

$(".flip7").click(function(){
    $(".panel7").slideToggle("normal");
  });

$(".flip8").click(function(){
    $(".panel8").slideToggle("normal");
  });

$(".flip9").click(function(){
    $(".panel9").slideToggle("normal");
  });

});
</script>
 
<style type="text/css"> 

div.panel0,p.flip0
{
    font-size: 0.9em;
    margin: 0;
    padding: 0.1em 0 0.1em 0.5em;
    border-bottom: 1px solid #86989B;
}
p.flip0
{
    color: white;
    font-weight: bold;
    background-color: #AFC1C4;
}
div.panel0
{
display:none;
}

div.panel1,p.flip1
{
    font-size: 0.9em;
    margin: 0;
    padding: 0.1em 0 0.1em 0.5em;
    border-bottom: 1px solid #86989B;
}
p.flip1
{
    color: white;
    font-weight: bold;
    background-color: #AFC1C4;
}
div.panel1
{
display:none;
}

div.panel2,p.flip2
{
    font-size: 0.9em;
    margin: 0;
    padding: 0.1em 0 0.1em 0.5em;
    border-bottom: 1px solid #86989B;
}
p.flip2
{
    color: white;
    font-weight: bold;
    background-color: #AFC1C4;
}
div.panel2
{
display:none;
}

div.panel3,p.flip3
{
    font-size: 0.9em;
    margin: 0;
    padding: 0.1em 0 0.1em 0.5em;
    border-bottom: 1px solid #86989B;
}
p.flip3
{
    color: white;
    font-weight: bold;
    background-color: #AFC1C4;
}
div.panel3
{
display:none;
}

div.panel4,p.flip4
{
    font-size: 0.9em;
    margin: 0;
    padding: 0.1em 0 0.1em 0.5em;
    border-bottom: 1px solid #86989B;
}
p.flip4
{
    color: white;
    font-weight: bold;
    background-color: #AFC1C4;
}
div.panel4
{
display:none;
}

div.panel5,p.flip5
{
    font-size: 0.9em;
    margin: 0;
    padding: 0.1em 0 0.1em 0.5em;
    border-bottom: 1px solid #86989B;
}
p.flip5
{
    color: white;
    font-weight: bold;
    background-color: #AFC1C4;
}
div.panel5
{
display:none;
}

div.panel6,p.flip6
{
    font-size: 0.9em;
    margin: 0;
    padding: 0.1em 0 0.1em 0.5em;
    border-bottom: 1px solid #86989B;
}
p.flip6
{
    color: white;
    font-weight: bold;
    background-color: #AFC1C4;
}
div.panel6
{
display:none;
}

div.panel7,p.flip7
{
    font-size: 0.9em;
    margin: 0;
    padding: 0.1em 0 0.1em 0.5em;
    border-bottom: 1px solid #86989B;
}
p.flip7
{
    color: white;
    font-weight: bold;
    background-color: #AFC1C4;
}
div.panel7
{
display:none;
}

div.panel8,p.flip8
{
    font-size: 0.9em;
    margin: 0;
    padding: 0.1em 0 0.1em 0.5em;
    border-bottom: 1px solid #86989B;
}
p.flip8
{
    color: white;
    font-weight: bold;
    background-color: #AFC1C4;
}
div.panel8
{
display:none;
}

div.panel9,p.flip9
{
    font-size: 0.9em;
    margin: 0;
    padding: 0.1em 0 0.1em 0.5em;
    border-bottom: 1px solid #86989B;
}
p.flip9
{
    color: white;
    font-weight: bold;
    background-color: #AFC1C4;
}
div.panel9
{
display:none;
}

</style>
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-18709417-2']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>

  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../fitting/fitting.html" title="Fitting and Modeling 1-D and 2-D Data"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="publication.html" title="Publication-quality plots"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">Python4Astronomers v1.1 documentation</a> &raquo;</li>
          <li><a href="plotting.html" accesskey="U">Plotting and Images</a> &raquo;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">APLpy</a><ul>
<li><a class="reference internal" href="#documentation">Documentation</a></li>
<li><a class="reference internal" href="#when-things-go-wrong">When things go wrong</a></li>
<li><a class="reference internal" href="#getting-started">Getting Started</a></li>
<li><a class="reference internal" href="#color-images">Color Images</a></li>
<li><a class="reference internal" href="#publication-quality-images">Publication Quality Images</a></li>
<li><a class="reference internal" href="#subplots-and-ds9-region-files">Subplots and DS9 Region Files</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="publication.html"
                        title="previous chapter">Publication-quality plots</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="../fitting/fitting.html"
                        title="next chapter">Fitting and Modeling 1-D and 2-D Data</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../_sources/plotting/aplpy.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" size="18" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="aplpy">
<h1>APLpy<a class="headerlink" href="#aplpy" title="Permalink to this headline">¶</a></h1>
<p><a class="reference external" href="http://aplpy.github.com">APLpy</a> (the Astronomical Plotting Library in Python) is a Python module aimed at producing publication-quality plots of astronomical imaging data in FITS format. It effectively provides a layer on top of Matplotlib to enable plotting of Astronomical images, and allows users to:</p>
<ul class="simple">
<li>Make plots interactively or using scripts</li>
<li>Show grayscale, colorscale, and 3-color RGB images of FITS files</li>
<li>Generate co-aligned FITS cubes to make 3-color RGB images</li>
<li>Overlay any number of contour sets</li>
<li>Overlay markers with fully customizable symbols</li>
<li>Plot customizable shapes like circles, ellipses, and rectangles</li>
<li>Overlay ds9 region files</li>
<li>Overlay coordinate grids</li>
<li>Show colorbars, scalebars, and beams</li>
<li>Easily customize the appearance of labels and ticks</li>
<li>Hide, show, and remove different contour and marker layers</li>
<li>Pan, zoom, and save any view as a full publication-quality plot</li>
<li>Save plots as EPS, PDF, PS, PNG, and SVG</li>
</ul>
<div class="section" id="documentation">
<h2>Documentation<a class="headerlink" href="#documentation" title="Permalink to this headline">¶</a></h2>
<p>The APLpy <a class="reference external" href="http://aplpy.github.com/documentation/index.html">Documentation</a> contains all the information needed to run APLpy successfully. The most important page is the <a class="reference external" href="http://aplpy.github.com/documentation/quick_reference.html">Quick Reference Guide</a> which provides concise instructions for all of the APLpy functions.</p>
</div>
<div class="section" id="when-things-go-wrong">
<h2>When things go wrong<a class="headerlink" href="#when-things-go-wrong" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Team up with someone for now. We can fix the installation errors afterward. The basic modules are aplpy, pywcs and pyfits (beyond NumPy and Matplotlib). The cool, but not required modules are pyregion, PIL, python-montage (Montage from IRSA will be needed).</li>
<li>If you run into what you believe is a bug, please report it at the GitHub <a class="reference external" href="https://github.com/aplpy/aplpy/issues">Issue Tracker</a>.</li>
</ul>
</div>
<div class="section" id="getting-started">
<h2>Getting Started<a class="headerlink" href="#getting-started" title="Permalink to this headline">¶</a></h2>
<p>Start off by downloading <a class="reference download internal" href="../_downloads/ic348_wise.tar"><tt class="xref download docutils literal"><span class="pre">this</span> <span class="pre">tar</span> <span class="pre">file</span></tt></a>, expand it, and go to the <tt class="docutils literal"><span class="pre">ic348_wise</span></tt> directory on the command line. Then, launch pylab:</p>
<div class="highlight-python"><pre>$ ipython --pylab</pre>
</div>
<p>If you have trouble downloading the file, then start up IPython (<tt class="docutils literal"><span class="pre">ipython</span> <span class="pre">-pylab</span></tt>) and enter:</p>
<div class="highlight-python"><pre>import urllib2, tarfile
url = 'http://python4astronomers.github.com/_downloads/ic348_wise.tar'
tarfile.open(fileobj=urllib2.urlopen(url), mode='r|').extractall()
cd APLpy-example
ls</pre>
</div>
<p>Import the <tt class="docutils literal"><span class="pre">aplpy</span></tt> module (note the lowercase module name):</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">aplpy</span>
</pre></div>
</div>
<p>And create a new figure to plot the FITS file with:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># Launch APLpy figure of image</span>
<span class="n">img</span> <span class="o">=</span> <span class="n">aplpy</span><span class="o">.</span><span class="n">FITSFigure</span><span class="p">(</span><span class="s">&#39;w1.fits&#39;</span><span class="p">)</span>

<span class="c"># Apply grayscale mapping of image</span>
<span class="n">img</span><span class="o">.</span><span class="n">show_grayscale</span><span class="p">()</span>

<span class="c"># Or apply a different stretch to the image</span>
<span class="n">img</span><span class="o">.</span><span class="n">show_grayscale</span><span class="p">(</span><span class="n">stretch</span><span class="o">=</span><span class="s">&#39;arcsinh&#39;</span><span class="p">)</span>

<span class="c"># Specifically specify lower and upper limit</span>
<span class="n">img</span><span class="o">.</span><span class="n">show_grayscale</span><span class="p">(</span><span class="n">stretch</span><span class="o">=</span><span class="s">&#39;arcsinh&#39;</span><span class="p">,</span> <span class="n">vmin</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">vmax</span><span class="o">=</span><span class="mi">290</span><span class="p">)</span>

<span class="c"># Display a grid and tweak the properties</span>
<span class="n">img</span><span class="o">.</span><span class="n">show_grid</span><span class="p">()</span>

<span class="c"># Modify the tick labels for precision and format</span>
<span class="n">img</span><span class="o">.</span><span class="n">tick_labels</span><span class="o">.</span><span class="n">set_xformat</span><span class="p">(</span><span class="s">&#39;hhmm&#39;</span><span class="p">)</span>
<span class="n">img</span><span class="o">.</span><span class="n">tick_labels</span><span class="o">.</span><span class="n">set_yformat</span><span class="p">(</span><span class="s">&#39;ddmm&#39;</span><span class="p">)</span>

<span class="c"># Move the tick labels</span>
<span class="n">img</span><span class="o">.</span><span class="n">tick_labels</span><span class="o">.</span><span class="n">set_xposition</span><span class="p">(</span><span class="s">&#39;top&#39;</span><span class="p">)</span>
<span class="n">img</span><span class="o">.</span><span class="n">tick_labels</span><span class="o">.</span><span class="n">set_yposition</span><span class="p">(</span><span class="s">&#39;right&#39;</span><span class="p">)</span>
<span class="n">img</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s">&#39;ic348_basic.eps&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>The latter is recommended because it will automatically figure out the best resolution with which to output your plot. Your plot should look something like this:</p>
<a class="reference internal image-reference" href="../_images/ic348_basic.png"><img alt="../_images/ic348_basic.png" src="../_images/ic348_basic.png" style="width: 470.0px; height: 395.5px;" /></a>
</div>
<div class="section" id="color-images">
<h2>Color Images<a class="headerlink" href="#color-images" title="Permalink to this headline">¶</a></h2>
<p>Now let&#8217;s do something a bit more advanced where we&#8217;ll make a color image from the fits files and plot some extra features on top of it. If you cannot get Montage and python-montage installed, then you can use the already produced files to follow along with the exercise:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">aplpy</span>

<span class="c"># Make RGB cube - images do not need not to have the same WCS</span>
<span class="n">aplpy</span><span class="o">.</span><span class="n">make_rgb_cube</span><span class="p">([</span><span class="s">&#39;w3.fits&#39;</span><span class="p">,</span><span class="s">&#39;w2.fits&#39;</span><span class="p">,</span><span class="s">&#39;w1.fits&#39;</span><span class="p">],</span> <span class="s">&#39;cube.fits&#39;</span><span class="p">)</span>

<span class="c"># Make RGB image - you can specify color parameters here</span>
<span class="n">aplpy</span><span class="o">.</span><span class="n">make_rgb_image</span><span class="p">(</span><span class="s">&#39;cube.fits&#39;</span><span class="p">,</span><span class="s">&#39;rgb_image_linear.png&#39;</span><span class="p">)</span>

<span class="c"># Customize it</span>
<span class="n">aplpy</span><span class="o">.</span><span class="n">make_rgb_image</span><span class="p">(</span><span class="s">&#39;cube.fits&#39;</span><span class="p">,</span><span class="s">&#39;rgb_image_arcsinh.png&#39;</span><span class="p">,</span>
                      <span class="n">stretch_r</span><span class="o">=</span><span class="s">&#39;arcsinh&#39;</span><span class="p">,</span> <span class="n">stretch_g</span><span class="o">=</span><span class="s">&#39;arcsinh&#39;</span><span class="p">,</span>
                      <span class="n">stretch_b</span><span class="o">=</span><span class="s">&#39;arcsinh&#39;</span><span class="p">)</span>

<span class="c"># Launch APLpy figure of 2D cube</span>
<span class="n">img</span> <span class="o">=</span> <span class="n">aplpy</span><span class="o">.</span><span class="n">FITSFigure</span><span class="p">(</span><span class="s">&#39;cube_2d.fits&#39;</span><span class="p">)</span>
<span class="n">img</span><span class="o">.</span><span class="n">show_rgb</span><span class="p">(</span><span class="s">&#39;rgb_image_arcsinh.png&#39;</span><span class="p">)</span>

<span class="c"># Maybe we would like the arcsinh stretched image more?</span>
<span class="n">img</span><span class="o">.</span><span class="n">show_rgb</span><span class="p">(</span><span class="s">&#39;ic348_color_arcsinh.png&#39;</span><span class="p">)</span>

<span class="c"># Modify the tick labels for precision and format</span>
<span class="n">img</span><span class="o">.</span><span class="n">tick_labels</span><span class="o">.</span><span class="n">set_xformat</span><span class="p">(</span><span class="s">&#39;hhmmss&#39;</span><span class="p">)</span>
<span class="n">img</span><span class="o">.</span><span class="n">tick_labels</span><span class="o">.</span><span class="n">set_yformat</span><span class="p">(</span><span class="s">&#39;ddmm&#39;</span><span class="p">)</span>

<span class="c"># Let&#39;s add a scalebar to it</span>
<span class="n">img</span><span class="o">.</span><span class="n">add_scalebar</span><span class="p">(</span><span class="mi">5</span><span class="o">/</span><span class="mf">60.</span><span class="p">)</span>
<span class="n">img</span><span class="o">.</span><span class="n">scalebar</span><span class="o">.</span><span class="n">set_label</span><span class="p">(</span><span class="s">&#39;5 arcmin&#39;</span><span class="p">)</span>
<span class="n">img</span><span class="o">.</span><span class="n">scalebar</span><span class="o">.</span><span class="n">set_color</span><span class="p">(</span><span class="s">&#39;white&#39;</span><span class="p">)</span>

<span class="c"># We may want to lengthen the scalebar, move it to the top left,</span>
<span class="c"># and apply a physical scale</span>
<span class="n">img</span><span class="o">.</span><span class="n">scalebar</span><span class="o">.</span><span class="n">set_corner</span><span class="p">(</span><span class="s">&#39;top left&#39;</span><span class="p">)</span>
<span class="n">img</span><span class="o">.</span><span class="n">scalebar</span><span class="o">.</span><span class="n">set_length</span><span class="p">(</span><span class="mi">17</span><span class="o">/</span><span class="mf">60.</span><span class="p">)</span>
<span class="n">img</span><span class="o">.</span><span class="n">scalebar</span><span class="o">.</span><span class="n">set_label</span><span class="p">(</span><span class="s">&#39;1 parsec&#39;</span><span class="p">)</span>
<span class="n">img</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s">&#39;ic348_color_arcsinh.pdf&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Your final color plot should look something like this:</p>
<a class="reference internal image-reference" href="../_images/ic348_color_scalebar.png"><img alt="../_images/ic348_color_scalebar.png" src="../_images/ic348_color_scalebar.png" style="width: 436.0px; height: 395.5px;" /></a>
</div>
<div class="section" id="publication-quality-images">
<h2>Publication Quality Images<a class="headerlink" href="#publication-quality-images" title="Permalink to this headline">¶</a></h2>
<p>We&#8217;re ready at this point to start making science-grade plots with APLpy with contours and markers:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">aplpy</span><span class="o">,</span> <span class="nn">atpy</span>

<span class="c"># Launch APLpy figure of image</span>
<span class="n">img</span> <span class="o">=</span> <span class="n">aplpy</span><span class="o">.</span><span class="n">FITSFigure</span><span class="p">(</span><span class="s">&#39;w2.fits&#39;</span><span class="p">)</span>

<span class="c"># Apply grayscale mapping of image</span>
<span class="n">img</span><span class="o">.</span><span class="n">show_grayscale</span><span class="p">()</span>

<span class="c"># Or apply a different stretch to the image</span>
<span class="n">img</span><span class="o">.</span><span class="n">show_grayscale</span><span class="p">(</span><span class="n">stretch</span><span class="o">=</span><span class="s">&#39;arcsinh&#39;</span><span class="p">)</span>

<span class="c"># Specifically specify lower and upper limit</span>
<span class="n">img</span><span class="o">.</span><span class="n">show_grayscale</span><span class="p">(</span><span class="n">stretch</span><span class="o">=</span><span class="s">&#39;arcsinh&#39;</span><span class="p">,</span> <span class="n">vmin</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">vmax</span><span class="o">=</span><span class="mi">180</span><span class="p">)</span>

<span class="c"># Modify the tick labels for precision and format</span>
<span class="n">img</span><span class="o">.</span><span class="n">tick_labels</span><span class="o">.</span><span class="n">set_xformat</span><span class="p">(</span><span class="s">&#39;hhmmss&#39;</span><span class="p">)</span>
<span class="n">img</span><span class="o">.</span><span class="n">tick_labels</span><span class="o">.</span><span class="n">set_yformat</span><span class="p">(</span><span class="s">&#39;ddmm&#39;</span><span class="p">)</span>

<span class="c"># ATpy to pull in sources</span>
<span class="c"># If you want to see what columns are available - type t.describe()</span>
<span class="n">t</span> <span class="o">=</span> <span class="n">atpy</span><span class="o">.</span><span class="n">Table</span><span class="p">(</span><span class="s">&#39;per_ysoc_c2d.fits&#39;</span><span class="p">)</span>

<span class="c"># Now, let&#39;s display the young stellar objects (YSOs) in the region</span>
<span class="c"># using c2d Spitzer data</span>
<span class="n">img</span><span class="o">.</span><span class="n">show_markers</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">ra</span><span class="p">,</span> <span class="n">t</span><span class="o">.</span><span class="n">dec</span><span class="p">)</span>

<span class="c"># But let&#39;s make the markers bigger and triangles instead</span>
<span class="c"># Before we can do that we need to list the layers</span>
<span class="n">img</span><span class="o">.</span><span class="n">list_layers</span><span class="p">()</span>
<span class="n">img</span><span class="o">.</span><span class="n">remove_layer</span><span class="p">(</span><span class="s">&#39;marker_set_1&#39;</span><span class="p">)</span>

<span class="c"># Now we add the new markers</span>
<span class="n">img</span><span class="o">.</span><span class="n">show_markers</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">ra</span><span class="p">,</span> <span class="n">t</span><span class="o">.</span><span class="n">dec</span><span class="p">,</span> <span class="n">marker</span><span class="o">=</span><span class="s">&#39;^&#39;</span><span class="p">,</span> <span class="n">s</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>

<span class="c"># Let&#39;s add a contour from Av map of the region from COMPLETE Survey</span>
<span class="n">img</span><span class="o">.</span><span class="n">show_contour</span><span class="p">(</span><span class="s">&#39;per_extn2mass.fits&#39;</span><span class="p">,</span> <span class="n">levels</span><span class="o">=</span><span class="p">[</span><span class="mi">8</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">4</span><span class="p">],</span> <span class="n">colors</span><span class="o">=</span><span class="s">&#39;orange&#39;</span><span class="p">)</span>
<span class="n">img</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s">&#39;ic348_marker_contour.png&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>The science-grade plot should look something like this:</p>
<a class="reference internal image-reference" href="../_images/ic348_marker_contour.png"><img alt="../_images/ic348_marker_contour.png" src="../_images/ic348_marker_contour.png" style="width: 436.0px; height: 395.5px;" /></a>
<div class="admonition-exercise-1 admonition ">
<p class="first admonition-title">Exercise 1</p>
<p class="last">Use the  <tt class="docutils literal"><span class="pre">help</span></tt> or <tt class="docutils literal"><span class="pre">?</span></tt> functionality in <tt class="docutils literal"><span class="pre">ipython</span></tt> to figure out how to reproduce (within reason) the image below. Additionally, using the tabbing feature to see what other methods are available is key for this exercise. Use the <a class="reference external" href="http://aplpy.github.com/documentation/quick_reference.html">Quick Reference Guide</a> for other information that may be helpful.</p>
</div>
<a class="reference internal image-reference" href="../_images/per_av_grid_markers.png"><img alt="../_images/per_av_grid_markers.png" src="../_images/per_av_grid_markers.png" style="width: 449.0px; height: 395.5px;" /></a>
<p class="flip1">Click to Show/Hide Solution</p> <div class="panel1"><div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">aplpy</span>
<span class="kn">import</span> <span class="nn">atpy</span>

<span class="c"># Exercise</span>

<span class="n">img</span> <span class="o">=</span> <span class="n">aplpy</span><span class="o">.</span><span class="n">FITSFigure</span><span class="p">(</span><span class="s">&#39;per_av_j2000.fits&#39;</span><span class="p">)</span>

<span class="c"># Identical to show_grayscale</span>
<span class="n">img</span><span class="o">.</span><span class="n">show_colorscale</span><span class="p">()</span>

<span class="c"># Recenter the image with a defined width of 5 degrees</span>
<span class="n">img</span><span class="o">.</span><span class="n">recenter</span><span class="p">(</span><span class="mf">54.51</span><span class="p">,</span> <span class="mf">31.39</span><span class="p">,</span> <span class="n">radius</span><span class="o">=</span><span class="mf">2.5</span><span class="p">)</span>

<span class="c"># Show the grid</span>
<span class="n">img</span><span class="o">.</span><span class="n">show_grid</span><span class="p">()</span>

<span class="c"># Define tick label style</span>
<span class="n">img</span><span class="o">.</span><span class="n">tick_labels</span><span class="o">.</span><span class="n">set_xformat</span><span class="p">(</span><span class="s">&#39;hhmm&#39;</span><span class="p">)</span>
<span class="n">img</span><span class="o">.</span><span class="n">tick_labels</span><span class="o">.</span><span class="n">set_yformat</span><span class="p">(</span><span class="s">&#39;ddmm&#39;</span><span class="p">)</span>

<span class="n">img</span><span class="o">.</span><span class="n">show_colorbar</span><span class="p">()</span>

<span class="c"># Read in table using atpy</span>
<span class="n">t</span> <span class="o">=</span> <span class="n">atpy</span><span class="o">.</span><span class="n">Table</span><span class="p">(</span><span class="s">&#39;per_ysoc_c2d.fits&#39;</span><span class="p">)</span>

<span class="c"># Plot markers</span>
<span class="n">img</span><span class="o">.</span><span class="n">show_markers</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">ra</span><span class="p">,</span> <span class="n">t</span><span class="o">.</span><span class="n">dec</span><span class="p">,</span> <span class="n">facecolor</span><span class="o">=</span><span class="s">&#39;black&#39;</span><span class="p">,</span> <span class="n">edgecolor</span><span class="o">=</span><span class="s">&#39;none&#39;</span><span class="p">,</span> <span class="n">s</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>

<span class="n">img</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s">&#39;ic348_av_markers.png&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div></div>
<div class="section" id="subplots-and-ds9-region-files">
<h2>Subplots and DS9 Region Files<a class="headerlink" href="#subplots-and-ds9-region-files" title="Permalink to this headline">¶</a></h2>
<p>With APLpy we&#8217;re able to make subplots within a figure just like Matplotlib and we can pull in a DS9 region files. Unfortunately, there is a bug in the official pyregion release, so it&#8217;s suggested that you download the latest development version <a class="reference external" href="http://github.com/leejjoon/pyregion/zipball/master">here</a>. Use pip to install the package like the following.:</p>
<div class="highlight-python"><pre>$pip install pyregion/ --user --upgrade</pre>
</div>
<p>Now, let&#8217;s work on a example that shows both capabilities below:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">aplpy</span>
<span class="kn">import</span> <span class="nn">pyfits</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="kn">as</span> <span class="nn">mpl</span>

<span class="n">fig</span> <span class="o">=</span> <span class="n">mpl</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>

<span class="c"># Initiating first subplot</span>
<span class="n">f1</span> <span class="o">=</span> <span class="n">aplpy</span><span class="o">.</span><span class="n">FITSFigure</span><span class="p">(</span><span class="s">&#39;w4.fits&#39;</span><span class="p">,</span> <span class="n">figure</span><span class="o">=</span><span class="n">fig</span><span class="p">)</span>
<span class="n">f1</span><span class="o">.</span><span class="n">show_grayscale</span><span class="p">()</span>

<span class="c"># Load a regions file into APLpy plot</span>
<span class="n">f1</span><span class="o">.</span><span class="n">show_regions</span><span class="p">(</span><span class="s">&#39;bowshock.reg&#39;</span><span class="p">)</span>

<span class="c"># Modify the tick labels for precision and format</span>
<span class="n">f1</span><span class="o">.</span><span class="n">tick_labels</span><span class="o">.</span><span class="n">set_xformat</span><span class="p">(</span><span class="s">&#39;hhmmss&#39;</span><span class="p">)</span>
<span class="n">f1</span><span class="o">.</span><span class="n">tick_labels</span><span class="o">.</span><span class="n">set_yformat</span><span class="p">(</span><span class="s">&#39;ddmm&#39;</span><span class="p">)</span>

<span class="c"># Initiating second subplot</span>
<span class="n">f2</span> <span class="o">=</span> <span class="n">aplpy</span><span class="o">.</span><span class="n">FITSFigure</span><span class="p">(</span><span class="s">&#39;w4_bw1.fits&#39;</span><span class="p">,</span> <span class="n">figure</span><span class="o">=</span><span class="n">fig</span><span class="p">,</span>
                       <span class="n">subplot</span><span class="o">=</span><span class="p">[</span><span class="mf">0.25</span><span class="p">,</span><span class="mf">0.15</span><span class="p">,</span><span class="mf">0.11</span><span class="p">,</span><span class="mf">0.15</span><span class="p">])</span>
<span class="n">f2</span><span class="o">.</span><span class="n">show_colorscale</span><span class="p">(</span><span class="n">cmap</span> <span class="o">=</span> <span class="n">cm</span><span class="o">.</span><span class="n">jet</span><span class="p">)</span>

<span class="c"># Hiding the ticks, tick labels (numbers) and axis labels (e.g. RA &amp; Dec.)</span>
<span class="n">f2</span><span class="o">.</span><span class="n">ticks</span><span class="o">.</span><span class="n">hide</span><span class="p">()</span>
<span class="n">f2</span><span class="o">.</span><span class="n">tick_labels</span><span class="o">.</span><span class="n">hide</span><span class="p">()</span>
<span class="n">f2</span><span class="o">.</span><span class="n">axis_labels</span><span class="o">.</span><span class="n">hide</span><span class="p">()</span>

<span class="c"># Another way of adding a subplot to the figure</span>
<span class="n">d</span> <span class="o">=</span> <span class="n">pyfits</span><span class="o">.</span><span class="n">getdata</span><span class="p">(</span><span class="s">&#39;w4_bw2.fits&#39;</span><span class="p">)</span>
<span class="n">f3</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_axes</span><span class="p">([</span><span class="mf">0.25</span><span class="p">,</span><span class="mf">0.7</span><span class="p">,</span><span class="mf">0.15</span><span class="p">,</span><span class="mf">0.15</span><span class="p">])</span>
<span class="n">f3</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="n">origin</span><span class="o">=</span><span class="s">&#39;lower left&#39;</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="n">cm</span><span class="o">.</span><span class="n">jet</span><span class="p">)</span>
<span class="n">f3</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">get_xaxis</span><span class="p">()</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
<span class="n">f3</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">get_yaxis</span><span class="p">()</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>

<span class="n">fig</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span>

<span class="n">fig</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s">&#39;subplots.pdf&#39;</span><span class="p">,</span> <span class="n">bbox_inches</span><span class="o">=</span><span class="s">&#39;tight&#39;</span><span class="p">)</span>
</pre></div>
</div>
<a class="reference internal image-reference" href="../_images/subplots.png"><img alt="../_images/subplots.png" src="../_images/subplots.png" style="width: 450.1px; height: 385.7px;" /></a>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../fitting/fitting.html" title="Fitting and Modeling 1-D and 2-D Data"
             >next</a> |</li>
        <li class="right" >
          <a href="publication.html" title="Publication-quality plots"
             >previous</a> |</li>
        <li><a href="../index.html">Python4Astronomers v1.1 documentation</a> &raquo;</li>
          <li><a href="plotting.html" >Plotting and Images</a> &raquo;</li> 
      </ul>
    </div>
 <small>Copyright:
 Smithsonian Astrophysical Observatory under terms of
 <a rel="license"
 href="http://creativecommons.org/licenses/by/3.0/">CC
 Attribution 3.0</a></small> <a rel="license"
 href="http://creativecommons.org/licenses/by/3.0/"><img alt="Creative Commons
 License" style="border-width:0"
 src="http://i.creativecommons.org/l/by/3.0/80x15.png" /></a>

  </body>
</html>